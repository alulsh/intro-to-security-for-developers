<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Intro to Security for Developers</title>

        <meta name="description" content="Intro to security for developers, presented at Mapbox Miniconf at DCFemTech Tour de Code 2016">
        <meta name="author" content="Alexandra Ulsh">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <section>
                        <h1>Intro to Security for Developers</h1>
                        <small>Alexandra Ulsh<br/>
                        Mapbox Miniconf<br/>
                        DCFemTech Tour de Code 2016</small>
                    </section>
                    <section data-markdown>
                        ## Overview
                        * About me
                        * Why learn security?
                        * Common security terms
                        * Device security
                        * Network security
                        * GitHub security
                        * Application security
                        * Infrastructure security
                    </section>
                    <section data-markdown>
                        Developers need to learn more than just how to write secure code.

                        A compromised laptop, weak password, or posting credentials on GitHub can all lead to a breach.
                    </section>
                    <section data-markdown>
                        ["Verizon DBIR: Over Half Of Data Breaches Exploited Legitimate Passwords In 2015"](http://www.darkreading.com/endpoint/verizon-dbir-over-half-of-data-breaches-exploited-legitimate-passwords-in-2015/d/d-id/1325242)

                        ["In major goof, Uber stored sensitive database key on public GitHub page"](http://arstechnica.com/security/2015/03/in-major-goof-uber-stored-sensitive-database-key-on-public-github-page/)

                        ["US Healthworks Suffers Data Breach Via Unencrypted Laptop"](http://www.forbes.com/sites/davelewis/2015/06/01/us-healthworks-suffers-data-breach-via-unencrypted-laptop/#4f9f06897005)
                    </section>
                </section>
                <section>
                    <section>
                        <p><code>&lt;script&gt;alert('whoami?')&lt;/script&gt;</code></p>
                    </section>
                    <section>
                        <p>Alexandra "Alex" Ulsh</p>
                        <p>Information Security Engineer at Mapbox</p>
                        <img src="img/alex-ulsh.jpg"/><br/>
                        <a href="https://www.twitter.com/AlexUlsh">@AlexUlsh</a><br/>
                        <a href="http://www.alexandraulsh.com/">alexandraulsh.com</a>
                    </section>
                    <section>
                        <img src="img/mapbox.jpg"/>
                        <p>I run our bug bounty program on <a href="https://hackerone.com/mapbox">HackerOne</a>, help lock down our AWS infrastructure with open source projects like <a href="">Patrol</a>, and make sure Mapbox team members are using all their devices and accounts securely.</p>
                    </section>
                    <section data-markdown>
                        ## How did I get started in security?
                        * 3.5 years sysadmin for U.S. DoD doing SharePoint administration
                        * Security+ certification required for job
                        * STIGs for SharePoint, IIS, and SQL Server (DIACAP)
                        * Open-sourced PowerShell module to STIG SharePoint
                        * [https://github.com/alulsh/SharePoint-2013-STIGs](https://github.com/alulsh/SharePoint-2013-STIGs)
                    </section>
                    <section data-markdown>
                        ## How can you get started in security?
                        * Learn how to secure your computers, cellphones, and accounts
                        * Learn how to write secure code and deploy secure infrastructure
                        * Learn how hackers attack systems and how to defend against them
                    </section>
                    <section data-markdown>
                        * Check out bug bounty programs on [HackerOne](https://hackerone.com/) and [Bugcrowd](https://bugcrowd.com/)
                        * Teach your friends and coworkers about security
                        * Offer to harden servers and do secure code reviews
                        * Think about the ways you or your organization can be hacked, then implement defenses
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        ## Why learn security?
                        * Protect yourself, people you care about, and your organization
                        * Responsibility to protect the security and privacy of the people who use our applications
                    </section>
                    <section data-markdown>
                        ## Software engineers

                        > Engineers bear a burden to the public, and their specific expertise as designers and builders of bridges or buildings—or software—emanates from that responsibility. Only after answering this calling does an engineer build anything, whether bridges or buildings or software.

                        ["Programmers: Stop Calling Yourselves Engineers"](http://www.theatlantic.com/technology/archive/2015/11/programmers-should-not-call-themselves-engineers/414271/)

                        The Atlantic
                    </section>
                    <section data-markdown>
                        If we want to call ourselves software **engineers**, then we need to build secure, stable, and reliable software that minimizes harm to others.
                    </section>
                    <section data-markdown>
                        # Diversity in Security

                        ![97% of HackerOne hackers are male](img/WhoAreHackers.png) 

                        * [HackerOne Hacker Report](https://hackerone.com/blog/bug-bounty-hacker-report-2016)

                    </section>
                    <section>
                        <p>Job opportunities in security</p>
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Common Security Terms
                    </section>
                    <section data-markdown>
                        * infosec = information security
                        * cybersecurity vs. infosec vs. information assurance (IA)
                        * appsec = application security
                        * netsec = network security
                        * physical security = locks, alarm systems, protecting devices from being stolen
                    </section>
                    <section data-markdown>
                        ## Offense vs. Defense
                        * Penetration testing (pentesting) = finding vulnerabilities in systems
                        * Red team = offensive team that pentests systems and breaks things
                        * Blue team = defensive team that protects systems and write secure systems
                    </section>
                    <section>
                        <h2>So Many Hats</h2>
                        <img alt="Archer wearing a gray hat, white hat, and black hat" src="img/hats.jpg" /><br/>
                        <small>Credit: Alex Hernandez, <a href="http://techaeris.com/2015/08/19/not-all-hackers-are-bad-short-guide-to-hacker-hat-colors/">Not All Hackers Are Bad – Short Guide To Hacker Hat Colors</a>, Techaeris</small>
                    </section>
                    <section data-markdown>
                        * White hat = ethical hacker, asks for permission, responsibly discloses vulnerabilities, possibly hired as a pentester
                        * Black hat = malicious, doesn't ask for permission, deletes data, asks victims for money
                        * Gray hat = nonchalant, may or may not ask for permission, may not report vulnerabilities at all or publicly discloses, hacks just for fun
                        * Red Hat? A type of Linux distribution
                    </section>
                    <section data-markdown>
                        ## Bug Bounty Programs
                        * Responsible disclosure
                        * Full disclosure
                        * Public disclosure
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Device Security
                    </section>
                    <section>
                        <p>"devices" = computers and phones</p>
                        <p>"mobile devices" = laptops and cellphones</p>
                        <p>MDM = mobile device management</p>
                    </section>
                    <section>
                        <p>We write code and store sensitive information on our devices.</p>
                        <p>We use our devices to authenticate to other (cloud) accounts</p>
                        <p>They're some of the first things we should lock down and protect.</p>
                    </section>
                    <section>
                        <h2>Laptops</h2>
                    </section>
                    <section data-markdown>
                        ## Physical security
                        * Don't leave your laptop unattended
                        * Be mindful of shoulder surfers
                            * Dim your screen or use a privacy screen
                        * Enable a device tracking and recovery program like [Find My Mac]() or [Prey]()
                        * Secure and encrypt your physical &amp; cloud backups
                    </section>
                    <section data-markdown>
                        ## Passwords
                        * Use a strong, complex password on your laptop
                        * Lock your computer when you step away from it
                        * Set your screen to auto lock after 5 minutes of inactivity
                        * Require a password on wake
                    </section>
                    <section data-markdown>
                        ## Hard Disk Encryption

                        [![Encrypting hard drives](http://imgs.xkcd.com/comics/security.png)](http://xkcd.com/538/)

                        * Windows - [BitLocker](http://www.windowscentral.com/how-use-bitlocker-encryption-windows-10)
                        * Mac - [FileVault](https://support.apple.com/en-us/HT204837)
                        * Linux - [LUKS](http://david.dw-perspective.org.uk/da/index.php/computer-resources/encrypted-partitions-on-linux-with-luks/comment-page-1/)
                    </section>
                    <section data-markdown>
                        Update your operating system and applications frequently.

                        Many updates are also security patches.

                        * [Windows Update](https://en.wikipedia.org/wiki/Windows_Update)
                        * [Mac App Store](https://www.apple.com/support/mac/app-store/) updates
                        * Linux: `sudo apt-get upgrade`
                    </section>
                    <section data-markdown>
                        Mac - keep [Homebrew](http://brew.sh/index.html) package manager up to date

                        Update Homebrew to latest gitsha
                        ```sh
                        brew update
                        ```
                        View outdated packages
                        ```sh
                        brew outdated
                        ```
                        Upgrade package `foobar`
                        ```sh
                        brew upgrade foobar
                        ```
                    </section>
                    <section data-markdown>
                        ## Smart phones
                    </section>
                    <section data-markdown>
                        ### Passcodes
                        * Use a strong and long (12+) alphanumeric passcode
                        * If you want to only use numbers, then at least use more than 8 numbers
                        * Require a passcode immediately after sleep
                        * iPhone: Enable erase data after 10 bad passcode attempts (take backups!)
                        * iPhone: If you are truly paranoid, don't enable [Touch ID](https://support.apple.com/en-us/HT201371)
                    </section>
                    <section>
                        <p>Android: don't use <a href="http://www.androidauthority.com/lock-pattern-predictable-636267/">common lock patterns</a></p>
                        <img src="img/weak-android-lock-patterns.png" /><br/>
                        <small>Edgar Cervantes, "Lock patterns are more predictable than we thought", <a href="http://www.androidauthority.com/lock-pattern-predictable-636267/">Android Authority</a></small>
                    </section>
                    <section>
                        <p>Enable Find My iPhone or Android Device Manager (remote wipe)</p>
                        <p>Apply the latest operating system and app updates</p>
                        <p>Android: Encrypt your phone (iPhones are encrypted by default)</p>
                    </section>
                </section>
                <section>
                    <section><h1>Network security</h1></section>
                    <section>
                        <h2>wi-fi</h2>
                        <p>Don't connect to unencrypted (passwordless) wifi networks</p>
                        <p>Anyone can sniff (view) HTTP traffic using tools like <a href="https://www.wireshark.org/">Wireshark</a> or <a href="http://www.tcpdump.org/">tcpdump</a></p>
                        <p>Traffic with HTTPS sites is protected with SSL/TLS though</p>
                    </section>
                    <section>
                        <p>If you must connect to unencrypted wifi, use a VPN client.</p>
                        <p>Find one that works on both laptops and cell phones</p>
                        <p>Pay for a VPN service. Unfortunately, if your VPN service is free then it may not be legit.</p>
                        <!--
                        Be wary of rogue, fake, or malicious wireless access points
                        Man in the middle attacks
                        -->
                    </section>
                    <section data-markdown>
                        ## Browser security
                        * HTTPS everywhere Chrome plugin
                        * Install an ad blocker
                        * Enable click-to-play
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Account Security
                    </section>
                    <section data-markdown>
                        ## Secure Passwords
                        * 16+ characters in length (the longer, the better)
                        * At least 2 lower case, 2 upper case, 2 numbers, and 2 special characters (`!@#$%^&amp;*()`)
                        * So complex you can't memorize it
                        * Unique - shouldn't be used anywhere else
                        * Use [diceware passphrases](http://world.std.com/~reinhold/diceware.html) if you need to memorize a secure passphrase
                    </section>
                    <section data-markdown>
                        * How do you use passwords you can't remember?
                        * Use a password manager!
                        * **Most important thing you can do for your personal security if you're not already using one.**
                        * Use one that you can easily use on all your devices, including smartphones.
                    </section>
                    <section data-markdown>
                        ## Password manager benefits
                        * Password managers protect against password reuse and weak passwords.
                        * Easy to change and rotate passwords.
                        * Password audit and breach notification services.
                        * Store more than just passwords - access tokens, 2FA backup codes, security questions, and credit cards.
                        * I recommend [1Password](https://1password.com/), others include [Encryptr](https://spideroak.com/solutions/encryptr), [LastPass](https://lastpass.com/), and [KeePass](http://keepass.info/).
                    </section>
                    <section data-markdown>
                        ## Two Factor Authentication (2FA)
                        * Requires a "second factor" or "second step."
                        * Usually a code generated from an app or sent via SMS.
                        * Generated with [Time-based One Time Passwords (TOTP)](https://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm) or [HMAC-based One-time Password Algorithm (HOTP)](https://en.wikipedia.org/wiki/HMAC-based_One-time_Password_Algorithm) algorithms.
                        * Someone can't hack your account with just the password, they also need the second factor.
                        * A weak password protected with 2FA is more secure than a complex password alone.
                        * 2FA apps - [Google Authenticator](https://en.wikipedia.org/wiki/Google_Authenticator), [Authy](https://www.authy.com/), and [Duo](https://duo.com/)
                    </section>
                    <section data-markdown>
                        ## 2FA Backup and Recovery Codes
                        * **Generate and save 2FA backup codes immediately after enabling.**
                        * Securely store in a password manager, safe, or lockbox.
                        * If you lose your phone or get a new one, **you'll lose access to all your 2FA-enabled accounts unless you have your backup codes**.
                        * [1Password comes with a 2FA authenticator](https://support.1password.com/one-time-passwords/) - recommended for ease of use and to avoid account lock out.
                    </section>
                    <section data-markdown>
                        ## Security questions
                        * Don't provide the correct answers to security questions.
                        * Answers to these questions are easy to find out on social media.
                        * Instead store fake answers in your password manager.
                        * Hackers stole security question answers in the [2014 Yahoo! breach](https://www.wired.com/2016/09/time-kill-security-questions-answer-lies/).
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Developer Tools Security
                    </section>
                    <section data-markdown>
                        # GitHub Account Security
                        * Enable 2FA on your GitHub account
                        * Encourage your organization to make this required for all members
                        * Best thing you can do to secure your GitHub account
                        * Especially in light of http://www.theregister.co.uk/2016/06/16/github_accounts_breached_password_reuse_fail/
                    </section>
                    <section data-markdown>
                        Help! I enabled 2FA and broke `git clone`!

                        * HTTPS - [create a personal access token](https://help.github.com/articles/creating-an-access-token-for-command-line-use/) (store in your password manager)
                        * Alternatively, [enable Git SSH authentication](https://help.github.com/articles/generating-an-ssh-key/)
                        * **Always use a strong passphrase to encrypt your SSH keys**
                        * A passphrase-less SSH key can be stolen by an attacker to impersonate you
                        * TODO: code sample for generating a GitHub SSH key
                    </section>
                    <section data-markdown>
                        # Repository Security
                        * Public vs. private repos
                        * Don't post sensitive information in issues in public GitHub repos
                        * Followers will get the initial email with your sensitive information even if you later edit or scrub the issue
                        * Don't post link
                    </section>
                    <section data-markdown>
                        * Don't post passwords or credentials on GitHub, including secret access token
                        * **Public* access tokens for client-side JavaScript code can be checked in
                        * Force commit or git history clean tool
                    </section>
                    <section data-markdown>
                        # Gist Security
                        * Private vs. public gists
                        * Be mindful of public Gists
                    </section>
                    <section data-markdown>
                        # Global `.gitignore`
                        * A robust global `.gitignore` file can help prevent accidentally checking in sensitive files
                    </section>
                    <section data-markdown>
                        # Travis CI security
                        * Encrypt secrets in your Travis CI configuration files
                    </section>
                    <section data-markdown>
                        # Node security
                        * Never run `sudo npm install`
                        * Instead install Node with a tool like nvms
                    </section>
                    <section data-markdown>
                        # Npm security
                        * Remove old contributors from your npm packages
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Application Security

                        #### "AppSec"

                    </section>
                    <section data-markdown>
                        ## Golden rules of AppSec
                        * All user input is untrusted and potentially malicious
                        * Encrypt all the things
                        * Add reasonable limits
                        * Hash and salt passwords
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Encrypt all the things
                    </section>
                    <section data-markdown>
                        ## `https://`
                        * HTTP Secure or HTTP over SSL/TLS
                        * SSL/TLS = Secure Socket Layer/Transport Layer Security
                        * Port 443 by default
                        * Encrypts all data in transit between client &amp; server
                        * Privacy, authentication, and integrity of data
                    </section>
                    <section data-markdown>
                        ## PKI Primer
                        * PKI = Public Key Infrastructure
                        * HTTPS uses PKI, specifically asymmetric public key cryptography
                        * Asymmetric = private keys (secret) and public keys (shared)
                        * Keys shared with secure key exchange algorithms (RSA, Diffie-Hellmen, elliptical curve)
                        * Digital certificates issued by certificate authorities verify identity
                    </section>
                    <section data-markdown>
                        ## How do you configure SSL/TLS?
                        * Buy a certificate from a Certificate Authority (CA)
                            * Domain Validated (DV), Organization Validated (OV), Extended Validation (EV) 
                        * [Let's Encrypt](https://letsencrypt.org/)
                            * Free, automated, and open CA
                            * Requires shell access to server
                            * Won't work on GitHub Pages websites :(
                        * Development use only - self-signed certificates
                    </section>
                    <section data-markdown>
                        ## Code sample

                        Follow along with the code sample in the `http-server` directory

                        Requires Node v4.6.0 and npm v2.15.19

                        ```sh
                        git clone git@github.com:alulsh/intro-to-security-for-developers.git
                        cd https-server
                        npm install
                        ```
                    </section>
                    <section data-markdown>
                        ## Generate a self-signed cert with OpenSSL

                        OpenSSL `req` command to generate a certificate signing request (CSR)

                        ```sh
                        openssl req -x509 -newkey rsa:2048 -keyout privatekey.pem -out cert.pem -days 365 -subj '/C=US/ST=DC/O=MyOrganization' -nodes
                        ```
                    </section>
                    <section data-markdown>
                        * `-x509` - output self-signed certificate instead of CSR
                        * `-newkey rsa:2048` - 2048 bit RSA private key
                        * `-keyout privatekey.pem` - private key
                        * `-out cert.pem` - self signed certificate
                        * `-subj` - subject name for certificate
                        * `-days 365` - key is valid for a year
                        * `-nodes` - private key is un-encrypted without a passphrase (**development only**)
                    </section>
                    <section data-markdown>
                        Add to your app's `package.json` as a script

                        ```js
                          "scripts": {
                            "cert": "openssl req -x509 -newkey rsa:2048 -keyout privatekey.pem -out cert.pem -days 365 -subj '/C=US/ST=DC/O=MyOrganization' -nodes",
                          },
                        ```

                        To generate new self-signed certs for development:
                        ```sh
                        npm run cert
                        ```

                        You should see two new files - `privatekey.pem` and `cert.pem`
                    </section>
                    <section data-markdown>
                        ## Simple HTTPS Express server
                        ```js
                        var express = require('express');
                        var https = require('https');
                        var fs = require('fs');
                        var app = express();

                        var options = {
                            key: fs.readFileSync('privatekey.pem'),
                            cert: fs.readFileSync('cert.pem')
                        }

                        https.createServer(options, app).listen(4000, function(err){
                            if (err) throw err;
                            console.log('Server started on port 4000');
                        });

                        app.get('/', function (req, res) {
                            res.header('Content-type', 'text/html');
                            return res.end('&lt;h1&gt;Served over HTTPS&lt;/h1&gt;');
                        });
                        ```

                        From `https-server` folder, run `npm start` command, then visit `https://localhost:4000/`
                    </section>
                    <section data-markdown>
                        ## SSL vs TLS
                        * SSL/TLS handshake to determine which versions of SSL or TLS
                        * All versions of SSL (1.0, 2.0, and 3.0) are insecure
                        * Disable all versions of SSL on your servers &amp; clients (browsers)
                        * Instead use TLS, preferably TLS 1.2
                        * Visit [https://www.howsmyssl.com/](How's My SSL?) to test your browser's SSL/TLS security
                    </section>
                    <section data-markdown>
                        ## SSL/TLS Exploits
                        * POODLE - SSLv3 downgrade exploit, later [certain TLS implementations](https://blog.qualys.com/ssllabs/2014/12/08/poodle-bites-tls)
                        * [Heartbleed](https://en.wikipedia.org/wiki/Heartbleed) - OpenSSL vulnerability
                        * [DROWN](https://en.wikipedia.org/wiki/DROWN_attack) - TLS vulnerability that exploited SSLv2 legacy support
                        * **Disable old versions of SSL and TLS if possible**
                    </section>
                    <section data-markdown>
                        ## Mixed content
                        * HTTPS page contains HTTP content - images, scripts, iframes
                        * The connection is now only **partially encrypted** - less privacy
                        * Victims subject to sniffing or man-in-the-middle attacks
                    </section>
                    <section data-markdown>
                        * Passive mixed content
                            * `&lt;img&gt;`, `&lt;audio&gt;`, `&lt;video&gt;`
                            * Less harmful, attacker can only replace images
                        * Active mixed content
                            * `&lt;script&gt;`, `&lt;link&gt;`, `XMLHttpRequest`
                            * Harmful, attacker can replace with malicious scripts!
                        * Good write up on [Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/Security/Mixed_content)
                    </section>
                    <section data-markdown>
                        ## Code sample
                        Follow along with the code sample in the `mixed-content` directory

                        Requires Node v4.6.0 and npm v2.15.19

                        ```sh
                        git clone git@github.com:alulsh/intro-to-security-for-developers.git
                        cd mixed-content
                        npm install
                        npm start
                        ```
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Cross-Site Scripting (XSS)
                    </section>
                    <section data-markdown>
                        ## What's XSS?
                        * Attackers injecting malicious code, usually JavaScript, into your website
                        * XSS payload = malicious code or JavaScript
                        * Treating user-provided data or input as trusted and not potentially malicious
                        * "Failure to separate data from instructions" - ["A Gentle Introduction to Application Security"](https://paragonie.com/blog/2015/08/gentle-introduction-application-security) from Paragon Initiative
                    </section>
                    <section data-markdown>
                        ## How malicious is JavaScript, anyway?
                        * Stealing cookies (access to `document.cookie`)
                        * Keyloggers (`addEventListener`)
                        * Phishing (create fake login forms)
                        * Capturing screenshots of user's session
                        * More scary XSS payloads at [xss-payloads.com](http://www.xss-payloads.com/payloads.html)
                    </section>
                    <section data-markdown>
                        ## Types of XSS

                        * Where is the vulnerable code?
                            * Server-side - server XSS
                            * Client-side - client XSS or DOM-based XSS
                        * How is the payload triggered?
                            * Stored or persistent XSS
                            * Reflected XSS
                            * Self-XSS
                    </section>
                    <section data-markdown>
                        ### Stored XSS
                        * Attacker injects script into a website's database
                        * e.g. attacker pastes payload into a comment on a forum, which is saved in the thread
                        * Malicious JavaScript executed **every time victims visit the page**
                        * Usually server XSS, unable to find real life stored client XSS examples (if you know one, tell me!)
                        * Real life example - [Stored XSS in Veris member portal](https://hackerone.com/reports/118950)
                        * Payload - `&lt;svg onload=alert(1)&gt;`
                    </section>
                    <section data-markdown>
                        ### Reflected XSS
                        * Victim clicks on link crafted to execute payload on page load, e.g. link in a phishing email or social media post
                        * Either server XSS or client XSS
                        * Real-life example - [Reflected XSS in scores.ubnt.com](https://hackerone.com/reports/130889)
                        * Payload - `https://scores.ubnt.com/form.html?uid=1&amp;p=airFiber"&gt;&lt;script&gt;alert(document.cookie);&lt;/script&gt;`
                    </section>
                    <section data-markdown>
                        ### Client XSS
                        * Also referred to as DOM-based XSS
                        * Insecure client-side JavaScript code
                        * Often but not always also reflected XSS
                        * Commonly seen with insecure use of `innerHTML` or templates (underscore, EJS)
                    </section>
                    <section data-markdown>
                        ### Code samples
                        Follow along with the code sample in the `xss` directory

                        Requires Node v4.6.0 and npm v2.15.19

                        ```sh
                        git clone git@github.com:alulsh/intro-to-security-for-developers.git
                        cd xss
                        npm install
                        npm start
                        ```
                        Visit `http://localhost:3000/` in your browser
                    </section>
                    <section data-markdown>
                        ### Malicious images
                        * Payload from code sample - `http://localhost:3000/results.html?query=&lt;img src="fake.jpg" onerror=alert(1)&gt;`
                        * Websites may block `&lt;script&gt;` tags, but may allow rich HTML content including `&lt;img&gt;` and `&lt;svg&gt;`
                        * `onerror` attribute executes JavaScript when image fails to load
                    </section>
                    <section data-markdown>
                        ### Incomplete list of client XSS payloads
                        * `javascript:` protocol - `&lt;IMG SRC=javascript:alert('XSS')&gt;`
                        * body tag - `&lt;BODY ONLOAD=alert('XSS')&gt;`
                        * link tag - `&lt;LINK REL="stylesheet" HREF="javascript:alert('XSS');"&gt;`
                        * CSS URLs - `&lt;DIV STYLE="background-image: url(javascript:alert('XSS'))"&gt;`
                        * [Markdown parsers](https://hackerone.com/reports/82725) - `[Click here](javascript:alert(1))`
                    </section>
                    <section data-markdown>
                        ### Even more payloads
                        * OWASP's awesomely long [XSS Filter Evasion Cheat Sheet](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet)
                        * [HTML5 Security Checklist](https://html5sec.org/)
                        * [XSS Hunter](https://xsshunter.com/) for XSS pentesting (ask for permission before using)
                    </section>
                    <section data-markdown>
                        ### How to prevent client XSS
                        * HTML escape user provided data before adding to the DOM
                        * HTML escaping &gt; sanitization
                        * Attackers will find ways to get around sanitization libraries
                        * Recommend [lodash escape function](https://lodash.com/docs/4.16.3#escape) `_.escape()`
                        * Don't use `textContent` or `createTextNode` to [escape HTML](http://benv.ca/2012/10/02/you-are-probably-misusing-DOM-text-methods/)
                        * Use HTML escaped [interpolation](https://en.wikipedia.org/wiki/String_interpolation) templates, as seen in [underscore](http://underscorejs.org/#template)
                            * `&lt;%-` instead of `&lt;%=` or `<%`
                            * Real-life example: [Reflected cross-site scripting (XSS) on api.tiles.mapbox.com](https://hackerone.com/reports/135217)
                    </section>
                    <section data-markdown>
                        ### More client XSS mitigations
                        * [Quote your HTML attribute values](http://wonko.com/post/html-escaping)
                            * `&lt;a href="url"` not `&lt;a href=url`
                        * Avoid using `innerHTML` to add user-provided data to the DOM
                            * Instead create the DOM elements manually (_artisanal DOM elements_)
                            * Real life example: [XSS in L.mapbox.shareControl in mapbox.js](https://hackerone.com/reports/99245)
                            * [mapbox.js pull request #1102](https://github.com/mapbox/mapbox.js/pull/1102/files)
                        * Use `X-XSS-Protection` and Content Security Policy headers
                    </section>
                    <section data-markdown>
                        ### Self-XSS
                        ![Facebook self XSS warning](img/FacebookSelfXSS.png)
                    </section>
                    <section data-markdown>
                        ## XSS Resources
                        * [Excess XSS, A comprehensive tutorial on cross-site scripting](http://excess-xss.com/)
                        * [XSS Game by Google](https://xss-game.appspot.com/)
                        * [OWASP XSS Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Authentication Systems
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        ## Information disclosure
                        * Disable or hide headers that show which version of which software you are using
                        * Don't leave DEBUG mode in production
                        * Don't display stack traces and sensitive errors to users
                        <!-- Code sample here for express.js -->
                    </section>
                    <section data-markdown>
                        ## Secure cookies
                        * What is a cookie?
                        * Secure and httpOnly flags
                        * dangers of localstorage - https://michael-coates.blogspot.com/2010/07/html5-local-storage-and-xss.html
                    </section>
                    <section data-markdown>
                        ## CSRF
                        * csurf express middleware
                    </section>
                    <section data-markdown>
                        ## oAuth security
                        * Use the `state` parameter when building oAuth solutions
                        <!-- TODO code sameple for adding state parameter - passport module -->
                    </section>
                    <section data-markdown>
                        ## Denial of Service (DoS)
                    </section>
                    <section data-markdown>
                        ## Distributed Denial of Service (DDoS)
                    </section>
                    <section data-markdown>
                        ## Brute force attacks
                    </section>
                    <section data-markdown>
                        ## Rate limiting
                    </section>
                    <section data-markdown>
                        ## Password security
                        * Salt and hash passwords with bcrypt
                        * learn-bcrypt folder on computer
                    </section>
                    <section data-markdown>
                        ## Content Security Policy (CSP)
                    </section>
                    <section data-markdown>
                        ## Clickjacking
                        * Also known as UI redressing
                    </section>
                    <section data-markdown>
                        ## Common security headers
                        * CSP - https://developers.google.com/web/fundamentals/security/csp/
                    </section>
                    <section data-markdown>
                        ## Expressjs helmet module
                        * https://helmetjs.github.io/
                        * https://github.com/helmetjs/helmet
                    </section>
                    <section data-markdown>
                        ## HSTS
                        * PKP (public-key pinning)
                    </section>
                    <section data-markdown>
                        ## Dependency management
                        * Use up to date packages and dependencies in your code
                        * Automate using `nsp` or `retire.js`
                    </section>
                </section>
                <section>
                    <section data-markdown>
                        # Infrastructure Security
                    </section>
                    <section data-markdown>
                        * DevSecOps
                        * Don’t run processes as root or admin
                        * Service accounts should have strong complex passwords
                        * Update your operating system and apply patches
                        * Disable directory listing
                        * Limit size of file uploads
                    <section data-markdown>
                        ## AWS security
                        * Don't enable directory listing on buckets
                    </section>
                </section>
                <section data-markdown>
                    ## Resources
                    * [Hacksplaining](https://www.hacksplaining.com/)
                    * [Node.js security checklist](https://blog.risingstack.com/node-js-security-checklist/)
                    * [A Gentle Introduction to Application Security](https://paragonie.com/blog/2015/08/gentle-introduction-application-security)
                    * [Security Checklist for Developers](https://github.com/FallibleInc/security-guide-for-developers/blob/master/security-checklist.md)
                </section>
            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            // More info https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                history: true,

                // More info https://github.com/hakimel/reveal.js#dependencies
                dependencies: [
                    { src: 'plugin/markdown/marked.js' },
                    { src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
                ]
            });
        </script>
    </body>
</html>
